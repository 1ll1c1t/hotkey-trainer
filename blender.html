<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blender 4.3 Interactive Hotkey Companion</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        /* Chart Container Styling - Mandatory per instructions */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px; /* Max width constraint */
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 300px; /* Max height constraint */
        }
        
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        .key-cap {
            background: linear-gradient(to bottom, #f8fafc, #e2e8f0);
            border-bottom: 3px solid #cbd5e1;
        }
        .key-cap:active {
            border-bottom: 1px solid #cbd5e1;
            transform: translateY(2px);
        }
    </style>
    <!-- Chosen Palette: Blender-Inspired Light Theme (Slate, Orange, Blue) -->
    <!-- Application Structure Plan:
         The app is structured as a dashboard with a sidebar for context switching (General, Viewport, Edit, Sculpt, Animation, Quiz, Analytics).
         
         1. **Sidebar Navigation**: Allows users to filter the vast list of hotkeys by their specific workflow context (e.g., "I'm sculpting right now").
         2. **Main Dashboard Area**:
            - **Search Bar**: Global search to find any key instantly.
            - **Context Header**: Explains the current section.
            - **Hotkey Grid**: Cards displaying the key combination and the action. Visual hierarchy emphasizes the Key itself.
         3. **Analytics Tab**: Visualizes the data (Modifier usage, Category distribution) to give meta-insights into Blender's design patterns.
         4. **Quiz Mode**: An interactive "Flashcard" game to actively test memory, reinforcing the learning from the report.
         
         This structure transforms a static list into an explorable tool and a learning game.
    -->
    <!-- Visualization & Content Choices:
         1. **Hotkey Grid (HTML/Tailwind)**:
            - Goal: Inform/Reference.
            - Method: Cards with distinct typography for Keys vs. Actions.
            - Interaction: Search filtering and category switching.
            - Justification: Users need quick lookups. A grid is scannable.
         
         2. **Category Distribution (Donut Chart - Chart.js)**:
            - Goal: Inform/Overview.
            - Method: Chart.js Doughnut chart showing the count of keys per mode.
            - Interaction: Hover to see counts.
            - Justification: Shows which areas of Blender are most hotkey-heavy (Edit Mode usually).
         
         3. **Modifier Key Usage (Bar Chart - Chart.js)**:
            - Goal: Analyze.
            - Method: Chart.js Bar chart counting Ctrl, Shift, Alt usage.
            - Interaction: Hover for values.
            - Justification: Helps users understand the "grammar" of Blender shortcuts (e.g., Shift is often for navigation or add).
            
         4. **Interactive Quiz (JS Logic)**:
            - Goal: Engage/Teach.
            - Method: Randomly selects a hotkey object, shows the Action, asks for the Key.
            - Interaction: Button clicks/Reveals.
            - Justification: Active recall is better than passive reading for memorization.
         
         <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    -->
</head>
<body class="bg-slate-50 text-slate-800 h-screen flex overflow-hidden">

    <!-- Mobile Menu Overlay -->
    <div id="mobile-menu-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-20 hidden lg:hidden" onclick="toggleMobileMenu()"></div>

    <!-- Sidebar -->
    <aside id="sidebar" class="bg-white w-64 flex-shrink-0 border-r border-slate-200 flex flex-col fixed inset-y-0 left-0 transform -translate-x-full lg:relative lg:translate-x-0 transition-transform duration-200 ease-in-out z-30">
        <div class="p-6 border-b border-slate-100 flex items-center justify-between">
            <h1 class="text-2xl font-bold text-slate-800 tracking-tight"><span class="text-orange-500">Blend</span>Key</h1>
            <button class="lg:hidden text-slate-500" onclick="toggleMobileMenu()">‚úï</button>
        </div>
        
        <nav class="flex-1 overflow-y-auto py-4">
            <ul class="space-y-1 px-3">
                <li>
                    <button onclick="setView('dashboard')" class="nav-btn w-full text-left px-4 py-3 rounded-lg flex items-center space-x-3 hover:bg-orange-50 text-slate-600 hover:text-orange-600 transition-colors font-medium bg-orange-50 text-orange-600" id="btn-dashboard">
                        <span>‚å®Ô∏è</span> <span>All Hotkeys</span>
                    </button>
                </li>
                <li>
                    <button onclick="setView('general')" class="nav-btn w-full text-left px-4 py-3 rounded-lg flex items-center space-x-3 hover:bg-orange-50 text-slate-600 hover:text-orange-600 transition-colors font-medium" id="btn-general">
                        <span>‚öôÔ∏è</span> <span>General</span>
                    </button>
                </li>
                <li>
                    <button onclick="setView('viewport')" class="nav-btn w-full text-left px-4 py-3 rounded-lg flex items-center space-x-3 hover:bg-orange-50 text-slate-600 hover:text-orange-600 transition-colors font-medium" id="btn-viewport">
                        <span>üëÅÔ∏è</span> <span>Viewport</span>
                    </button>
                </li>
                <li>
                    <button onclick="setView('edit')" class="nav-btn w-full text-left px-4 py-3 rounded-lg flex items-center space-x-3 hover:bg-orange-50 text-slate-600 hover:text-orange-600 transition-colors font-medium" id="btn-edit">
                        <span>üü¶</span> <span>Edit Mode</span>
                    </button>
                </li>
                <li>
                    <button onclick="setView('sculpt')" class="nav-btn w-full text-left px-4 py-3 rounded-lg flex items-center space-x-3 hover:bg-orange-50 text-slate-600 hover:text-orange-600 transition-colors font-medium" id="btn-sculpt">
                        <span>üóø</span> <span>Sculpt Mode</span>
                    </button>
                </li>
                <li>
                    <button onclick="setView('animation')" class="nav-btn w-full text-left px-4 py-3 rounded-lg flex items-center space-x-3 hover:bg-orange-50 text-slate-600 hover:text-orange-600 transition-colors font-medium" id="btn-animation">
                        <span>üé¨</span> <span>Animation</span>
                    </button>
                </li>
                <li class="pt-4 mt-4 border-t border-slate-100">
                    <button onclick="setView('quiz')" class="nav-btn w-full text-left px-4 py-3 rounded-lg flex items-center space-x-3 hover:bg-blue-50 text-slate-600 hover:text-blue-600 transition-colors font-medium" id="btn-quiz">
                        <span>üß†</span> <span>Quiz Mode</span>
                    </button>
                </li>
                <li>
                    <button onclick="setView('analytics')" class="nav-btn w-full text-left px-4 py-3 rounded-lg flex items-center space-x-3 hover:bg-purple-50 text-slate-600 hover:text-purple-600 transition-colors font-medium" id="btn-analytics">
                        <span>üìä</span> <span>Insights</span>
                    </button>
                </li>
            </ul>
        </nav>
        
        <div class="p-4 border-t border-slate-200 bg-slate-50">
            <p class="text-xs text-slate-400">Based on Blender 4.3 Cheatsheet</p>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 flex flex-col h-screen overflow-hidden relative">
        <!-- Mobile Header -->
        <header class="bg-white border-b border-slate-200 p-4 lg:hidden flex justify-between items-center z-10">
            <span class="font-bold text-orange-500">BlendKey</span>
            <button onclick="toggleMobileMenu()" class="text-slate-600">
                ‚ò∞ Menu
            </button>
        </header>

        <!-- Top Bar -->
        <div class="bg-white border-b border-slate-200 px-6 py-4 flex flex-col sm:flex-row justify-between items-center gap-4 z-10 shadow-sm">
            <div>
                <h2 id="section-title" class="text-xl font-bold text-slate-800">All Hotkeys</h2>
                <p id="section-desc" class="text-sm text-slate-500">Search across the entire cheatsheet.</p>
            </div>
            <div class="relative w-full sm:w-64">
                <input type="text" id="search-input" placeholder="Search functionality or key..." 
                    class="w-full pl-10 pr-4 py-2 bg-slate-100 border-none rounded-full focus:ring-2 focus:ring-orange-500 focus:bg-white transition-all outline-none text-sm">
                <span class="absolute left-3 top-2.5 text-slate-400">üîç</span>
            </div>
        </div>

        <!-- Scrollable Content Area -->
        <div id="content-area" class="flex-1 overflow-y-auto bg-slate-50 p-6 relative">
            
            <!-- Dynamic Grid for Hotkeys -->
            <div id="hotkey-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 pb-20">
                <!-- Cards injected via JS -->
            </div>

            <!-- Quiz View (Hidden by default) -->
            <div id="quiz-view" class="hidden h-full flex flex-col items-center justify-center max-w-2xl mx-auto">
                <div class="bg-white p-8 rounded-2xl shadow-xl w-full text-center border border-slate-100">
                    <div class="mb-6">
                        <span class="bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide" id="quiz-category">Category</span>
                    </div>
                    <h3 class="text-slate-500 text-lg mb-2">How do you trigger:</h3>
                    <h2 class="text-3xl font-bold text-slate-800 mb-8" id="quiz-question">Extrude</h2>
                    
                    <div id="quiz-answer-section" class="hidden mb-8 animate-fade-in">
                        <div class="text-5xl font-mono font-bold text-orange-500 mb-2" id="quiz-answer-key">E</div>
                        <p class="text-slate-400 text-sm">Correct Answer</p>
                    </div>

                    <div class="flex justify-center gap-4">
                        <button onclick="revealAnswer()" id="btn-reveal" class="bg-slate-800 text-white px-6 py-3 rounded-lg hover:bg-slate-700 transition shadow-lg font-semibold w-full sm:w-auto">Show Key</button>
                        <button onclick="nextQuestion()" id="btn-next" class="hidden bg-orange-500 text-white px-6 py-3 rounded-lg hover:bg-orange-600 transition shadow-lg font-semibold w-full sm:w-auto">Next Card</button>
                    </div>
                </div>
                <div class="mt-8 text-center text-slate-400 text-sm">
                    <p>Test your memory of the shortcuts.</p>
                </div>
            </div>

            <!-- Analytics View (Hidden by default) -->
            <div id="analytics-view" class="hidden max-w-5xl mx-auto space-y-6">
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                    <h3 class="text-lg font-bold text-slate-800 mb-4">Hotkey Distribution by Mode</h3>
                    <p class="text-sm text-slate-500 mb-4">Which modes have the steepest learning curve?</p>
                    <div class="chart-container">
                        <canvas id="categoryChart"></canvas>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                        <h3 class="text-lg font-bold text-slate-800 mb-4">Modifier Key Usage</h3>
                        <p class="text-sm text-slate-500 mb-4">Frequency of Ctrl, Shift, and Alt.</p>
                        <div class="chart-container">
                            <canvas id="modifierChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                        <h3 class="text-lg font-bold text-slate-800 mb-4">Action Types</h3>
                        <p class="text-sm text-slate-500 mb-4">What are we mostly doing?</p>
                        <div class="chart-container">
                            <canvas id="actionTypeChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <script>
        // --- DATA STORE ---
        // Extracted directly from the PDF source provided
        const hotkeyData = [
            // General
            { key: "G", action: "Grab (Move)", category: "General" },
            { key: "R", action: "Rotate", category: "General" },
            { key: "S", action: "Scale", category: "General" },
            { key: "X, Y, Z", action: "Constrain to Axis", category: "General" },
            { key: "Shift + X/Y/Z", action: "Constrain to Plane", category: "General" },
            { key: "Shift + D", action: "Duplicate", category: "General" },
            { key: "Alt + D", action: "Duplicate Linked", category: "General" },
            { key: "H", action: "Hide", category: "General" },
            { key: "Alt + H", action: "Unhide", category: "General" },
            { key: "N", action: "Toggle Sidebar", category: "General" },
            { key: "T", action: "Toggle Toolbar", category: "General" },
            { key: "Ctrl + N", action: "New File", category: "General" },
            { key: "Ctrl + S", action: "Save", category: "General" },
            { key: "Alt + Ctrl + S", action: "Save Incremental", category: "General" },
            { key: "Q", action: "Quick Favorites", category: "General" },
            { key: "Delete / X", action: "Delete", category: "General" },
            { key: "Ctrl + Z", action: "Undo", category: "General" },
            { key: "Shift + Ctrl + Z", action: "Redo", category: "General" },
            { key: "Shift + A", action: "Add Menu", category: "General" },
            { key: "Ctrl + A", action: "Apply Menu", category: "General" },
            { key: "F3", action: "Search", category: "General" },
            { key: "F4", action: "File Context Menu", category: "General" },
            { key: "F9", action: "Adjust Last Operation", category: "General" },
            { key: "F12", action: "Render", category: "General" },
            { key: "Space", action: "Play Animation", category: "General" },
            { key: "Shift + Space", action: "Open Tools", category: "General" },

            // Viewport
            { key: "MMB", action: "Rotate View", category: "Viewport" },
            { key: "Shift + MMB", action: "Pan View", category: "Viewport" },
            { key: "Ctrl + MMB", action: "Zoom View", category: "Viewport" },
            { key: "Numpad .", action: "Frame Selected", category: "Viewport" },
            { key: "Numpad 0", action: "Camera View", category: "Viewport" },
            { key: "Numpad 1", action: "Front View", category: "Viewport" },
            { key: "Ctrl + Numpad 1", action: "Back View", category: "Viewport" },
            { key: "Numpad 3", action: "Right View", category: "Viewport" },
            { key: "Ctrl + Numpad 3", action: "Left View", category: "Viewport" },
            { key: "Numpad 7", action: "Top View", category: "Viewport" },
            { key: "Ctrl + Numpad 7", action: "Bottom View", category: "Viewport" },
            { key: "Numpad 5", action: "Toggle Persp/Ortho", category: "Viewport" },
            { key: "~", action: "Viewport Pie Menu", category: "Viewport" },
            { key: "Z", action: "Shading Pie Menu", category: "Viewport" },
            { key: "Shift + Z", action: "Toggle Wireframe", category: "Viewport" },
            { key: "Alt + Z", action: "Toggle X-Ray", category: "Viewport" },
            { key: "Ctrl + Alt + Q", action: "Toggle Quad View", category: "Viewport" },
            { key: "Ctrl + Space", action: "Maximize Area", category: "Viewport" },

            // Edit Mode
            { key: "Tab", action: "Toggle Object/Edit Mode", category: "Edit" },
            { key: "1", action: "Vertex Select", category: "Edit" },
            { key: "2", action: "Edge Select", category: "Edit" },
            { key: "3", action: "Face Select", category: "Edit" },
            { key: "E", action: "Extrude", category: "Edit" },
            { key: "I", action: "Inset", category: "Edit" },
            { key: "Ctrl + B", action: "Bevel", category: "Edit" },
            { key: "Ctrl + R", action: "Loop Cut", category: "Edit" },
            { key: "K", action: "Knife Tool", category: "Edit" },
            { key: "F", action: "Fill", category: "Edit" },
            { key: "J", action: "Join Two Vertices", category: "Edit" },
            { key: "P", action: "Separate", category: "Edit" },
            { key: "Y", action: "Split", category: "Edit" },
            { key: "V", action: "Rip", category: "Edit" },
            { key: "Ctrl + V", action: "Vertex Context Menu", category: "Edit" },
            { key: "Ctrl + E", action: "Edge Context Menu", category: "Edit" },
            { key: "Ctrl + F", action: "Face Context Menu", category: "Edit" },
            { key: "O", action: "Proportional Edit Toggle", category: "Edit" },
            { key: "Alt + O", action: "Prop. Edit Connected", category: "Edit" },
            { key: "L", action: "Select Linked", category: "Edit" },
            { key: "Ctrl + L", action: "Select Linked (All)", category: "Edit" },
            { key: "C", action: "Circle Select", category: "Edit" },
            { key: "A", action: "Select All", category: "Edit" },
            { key: "Alt + A", action: "Select None", category: "Edit" },
            { key: "Ctrl + I", action: "Invert Selection", category: "Edit" },
            { key: "Alt + Click", action: "Select Edge Loop", category: "Edit" },

            // Sculpt Mode
            { key: "F", action: "Brush Size", category: "Sculpt" },
            { key: "Shift + F", action: "Brush Strength", category: "Sculpt" },
            { key: "Ctrl + F", action: "Brush Angle", category: "Sculpt" },
            { key: "A", action: "Masking Pie Menu", category: "Sculpt" },
            { key: "B", action: "Box Mask", category: "Sculpt" },
            { key: "M", action: "Mask Tool", category: "Sculpt" },
            { key: "R", action: "Remesh Voxel Size", category: "Sculpt" },
            { key: "Ctrl + R", action: "Remesh", category: "Sculpt" },
            { key: "C", action: "Clay Strips Brush", category: "Sculpt" },
            { key: "G", action: "Grab Brush", category: "Sculpt" },
            { key: "S", action: "Smooth Brush", category: "Sculpt" },
            { key: "K", action: "Snake Hook Brush", category: "Sculpt" },
            { key: "P", action: "Pinch/Magnify Brush", category: "Sculpt" },
            { key: "V", action: "Draw Brush", category: "Sculpt" },
            { key: "Ctrl (Hold)", action: "Invert Brush", category: "Sculpt" },

            // Animation
            { key: "I", action: "Insert Keyframe", category: "Animation" },
            { key: "G", action: "Move Keyframes", category: "Animation" },
            { key: "S", action: "Scale Keyframes", category: "Animation" },
            { key: "T", action: "Interpolation Mode", category: "Animation" },
            { key: "V", action: "Handle Type", category: "Animation" },
            { key: "Ctrl + E", action: "Easing Type", category: "Animation" },
            { key: "Shift + E", action: "Extrapolation", category: "Animation" },
            { key: "Ctrl + M", action: "Add F-Curve Modifier", category: "Animation" },
            { key: "P", action: "Set Preview Range", category: "Animation" },
            { key: "Alt + P", action: "Clear Preview Range", category: "Animation" },
            { key: "Home", action: "View All Keys", category: "Animation" }
        ];

        // --- STATE MANAGEMENT ---
        let currentView = 'dashboard';
        let searchQuery = '';
        let quizCurrentIndex = 0;
        let chartInstances = {};

        // --- DOM ELEMENTS ---
        const gridEl = document.getElementById('hotkey-grid');
        const titleEl = document.getElementById('section-title');
        const descEl = document.getElementById('section-desc');
        const searchInput = document.getElementById('search-input');
        const quizView = document.getElementById('quiz-view');
        const analyticsView = document.getElementById('analytics-view');
        const mobileMenu = document.getElementById('sidebar');
        const overlay = document.getElementById('mobile-menu-overlay');

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            renderGrid();
            searchInput.addEventListener('input', (e) => {
                searchQuery = e.target.value.toLowerCase();
                renderGrid();
            });
            initCharts();
        });

        // --- NAVIGATION LOGIC ---
        function setView(view) {
            currentView = view;
            
            // Reset Search
            searchQuery = '';
            searchInput.value = '';

            // Update UI State
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('bg-orange-50', 'text-orange-600', 'bg-blue-50', 'text-blue-600', 'bg-purple-50', 'text-purple-600');
                btn.classList.add('text-slate-600');
            });
            
            // Hide all special views
            gridEl.classList.remove('hidden');
            quizView.classList.add('hidden');
            analyticsView.classList.add('hidden');
            
            // Mobile menu close
            if(window.innerWidth < 1024) toggleMobileMenu();

            switch(view) {
                case 'dashboard':
                    titleEl.textContent = 'All Hotkeys';
                    descEl.textContent = 'Complete list of Blender 4.3 shortcuts.';
                    document.getElementById('btn-dashboard').classList.add('bg-orange-50', 'text-orange-600');
                    renderGrid();
                    break;
                case 'general':
                    titleEl.textContent = 'General';
                    descEl.textContent = 'Essential navigation, saving, and basic transformations.';
                    document.getElementById('btn-general').classList.add('bg-orange-50', 'text-orange-600');
                    renderGrid('General');
                    break;
                case 'viewport':
                    titleEl.textContent = 'Viewport';
                    descEl.textContent = 'Camera control, shading modes, and Numpad views.';
                    document.getElementById('btn-viewport').classList.add('bg-orange-50', 'text-orange-600');
                    renderGrid('Viewport');
                    break;
                case 'edit':
                    titleEl.textContent = 'Edit Mode';
                    descEl.textContent = 'Mesh modeling tools: Extrude, Bevel, Cut, and Select.';
                    document.getElementById('btn-edit').classList.add('bg-orange-50', 'text-orange-600');
                    renderGrid('Edit');
                    break;
                case 'sculpt':
                    titleEl.textContent = 'Sculpt Mode';
                    descEl.textContent = 'Brush controls, masking, and remeshing tools.';
                    document.getElementById('btn-sculpt').classList.add('bg-orange-50', 'text-orange-600');
                    renderGrid('Sculpt');
                    break;
                case 'animation':
                    titleEl.textContent = 'Animation Editors';
                    descEl.textContent = 'Timeline, Keyframes, and Graph Editor controls.';
                    document.getElementById('btn-animation').classList.add('bg-orange-50', 'text-orange-600');
                    renderGrid('Animation');
                    break;
                case 'quiz':
                    titleEl.textContent = 'Quiz Mode';
                    descEl.textContent = 'Test your knowledge. Can you remember the keys?';
                    document.getElementById('btn-quiz').classList.add('bg-blue-50', 'text-blue-600');
                    gridEl.classList.add('hidden');
                    quizView.classList.remove('hidden');
                    startQuiz();
                    break;
                case 'analytics':
                    titleEl.textContent = 'Insights';
                    descEl.textContent = 'Visual breakdown of Blender hotkey patterns.';
                    document.getElementById('btn-analytics').classList.add('bg-purple-50', 'text-purple-600');
                    gridEl.classList.add('hidden');
                    analyticsView.classList.remove('hidden');
                    break;
            }
        }

        // --- RENDERING LOGIC ---
        function renderGrid(filterCategory = null) {
            gridEl.innerHTML = '';
            
            const filteredData = hotkeyData.filter(item => {
                const matchesCategory = filterCategory ? item.category === filterCategory : true;
                const matchesSearch = item.action.toLowerCase().includes(searchQuery) || item.key.toLowerCase().includes(searchQuery);
                return matchesCategory && matchesSearch;
            });

            if (filteredData.length === 0) {
                gridEl.innerHTML = `
                    <div class="col-span-full text-center py-20">
                        <div class="text-4xl mb-4">üò∂‚Äçüå´Ô∏è</div>
                        <h3 class="text-lg font-semibold text-slate-700">No hotkeys found</h3>
                        <p class="text-slate-500">Try adjusting your search terms.</p>
                    </div>
                `;
                return;
            }

            filteredData.forEach(item => {
                const card = document.createElement('div');
                card.className = 'bg-white rounded-xl p-5 border border-slate-200 card-hover flex flex-col justify-between h-full transition-all duration-200';
                
                // Color coding tags
                let tagColor = 'bg-slate-100 text-slate-600';
                if(item.category === 'Edit') tagColor = 'bg-blue-50 text-blue-600';
                if(item.category === 'Sculpt') tagColor = 'bg-amber-50 text-amber-600';
                if(item.category === 'Animation') tagColor = 'bg-green-50 text-green-600';

                card.innerHTML = `
                    <div class="mb-4">
                        <span class="text-xs font-bold uppercase tracking-wider px-2 py-1 rounded-md ${tagColor}">${item.category}</span>
                        <h3 class="text-slate-600 font-medium mt-3 leading-snug">${item.action}</h3>
                    </div>
                    <div class="mt-auto">
                        <div class="key-cap inline-block px-3 py-2 rounded-lg text-slate-800 font-mono font-bold text-lg shadow-sm border border-slate-200">
                            ${item.key}
                        </div>
                    </div>
                `;
                gridEl.appendChild(card);
            });
        }

        function toggleMobileMenu() {
            mobileMenu.classList.toggle('-translate-x-full');
            overlay.classList.toggle('hidden');
        }

        // --- QUIZ LOGIC ---
        function startQuiz() {
            nextQuestion();
        }

        function nextQuestion() {
            // Pick random hotkey
            const randomItem = hotkeyData[Math.floor(Math.random() * hotkeyData.length)];
            
            document.getElementById('quiz-category').textContent = randomItem.category;
            document.getElementById('quiz-question').textContent = randomItem.action;
            document.getElementById('quiz-answer-key').textContent = randomItem.key;
            
            // Reset UI
            document.getElementById('quiz-answer-section').classList.add('hidden');
            document.getElementById('btn-reveal').classList.remove('hidden');
            document.getElementById('btn-next').classList.add('hidden');
        }

        function revealAnswer() {
            document.getElementById('quiz-answer-section').classList.remove('hidden');
            document.getElementById('btn-reveal').classList.add('hidden');
            document.getElementById('btn-next').classList.remove('hidden');
        }

        // --- CHARTS LOGIC ---
        function initCharts() {
            // 1. Categories Doughnut
            const catCounts = {};
            hotkeyData.forEach(d => catCounts[d.category] = (catCounts[d.category] || 0) + 1);
            
            const ctxCat = document.getElementById('categoryChart').getContext('2d');
            chartInstances.category = new Chart(ctxCat, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(catCounts),
                    datasets: [{
                        data: Object.values(catCounts),
                        backgroundColor: ['#f97316', '#3b82f6', '#8b5cf6', '#10b981', '#64748b'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'right' }
                    }
                }
            });

            // 2. Modifiers Bar
            let modCounts = { 'Ctrl': 0, 'Shift': 0, 'Alt': 0, 'Single Key': 0 };
            hotkeyData.forEach(d => {
                let hasMod = false;
                if(d.key.includes('Ctrl')) { modCounts['Ctrl']++; hasMod = true; }
                if(d.key.includes('Shift')) { modCounts['Shift']++; hasMod = true; }
                if(d.key.includes('Alt')) { modCounts['Alt']++; hasMod = true; }
                if(!hasMod) modCounts['Single Key']++;
            });

            const ctxMod = document.getElementById('modifierChart').getContext('2d');
            chartInstances.modifier = new Chart(ctxMod, {
                type: 'bar',
                data: {
                    labels: Object.keys(modCounts),
                    datasets: [{
                        label: 'Frequency',
                        data: Object.values(modCounts),
                        backgroundColor: '#f97316',
                        borderRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            });

            // 3. Action Types (Pie)
            // Heuristic guessing based on action text
            let types = { 'Navigation': 0, 'Selection': 0, 'Tools': 0, 'System': 0 };
            hotkeyData.forEach(d => {
                const act = d.action.toLowerCase();
                if(act.includes('view') || act.includes('pan') || act.includes('zoom') || act.includes('toggle')) {
                    types['Navigation']++;
                } else if(act.includes('select') || act.includes('mask')) {
                    types['Selection']++;
                } else if(act.includes('save') || act.includes('file') || act.includes('render')) {
                    types['System']++;
                } else {
                    types['Tools']++;
                }
            });

            const ctxType = document.getElementById('actionTypeChart').getContext('2d');
            chartInstances.type = new Chart(ctxType, {
                type: 'pie',
                data: {
                    labels: Object.keys(types),
                    datasets: [{
                        data: Object.values(types),
                        backgroundColor: ['#60a5fa', '#f472b6', '#fbbf24', '#94a3b8'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                }
            });
        }
    </script>
</body>
</html>